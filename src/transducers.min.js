define(function(){function g(){var a=arguments;return function(b){for(var c=a.length-1;0<=c;c--)b=a[c](b);return b}}function h(a,b,c,d){return k(a,b(c),d)}function k(a,b,c){c=c||b.a&&b.a();l(a,b,c);return c}function l(a,b,c){var d=0;if(Array.isArray(a))for(var e=d=0;!d&&e<a.length;++e)d=b(a[e],c);else if(a.then)d=a.then(b,c);else{var f=a[p];a=f?f.call(a):a;for(;e=a.next(),!d&&!e.done;)d=b(e.value,c)}b.b&&b.b(c);return d}function f(a,b){a.a&&(b.a=a.a);a.b&&(b.b=a.b);return b}function m(a){return function(b){return f(b,
function(c,d){return b(a(c),d)})}}function n(a){return f(a,function(b,c){return l(b,function(b,c){return a(b,c)},c)})}function q(){var a=[],b=function(c){a=a.filter(function(a){return a(c)});return!!a.length||!!b.then};b.then=function(b){a.push(b)};return b}var r=f({a:function(){return[]},b:function(){}},function(a,b){b.push(a)}),p=Symbol?Symbol.iterator:"@@iterator";return{compose:g,transduce:h,into:function(a,b,c){return h(b,c,r,a)},map:m,filter:function(a){return function(b){return f(b,function(c,
d){return a(c)&&b(c,d)})}},take:function(a){return function(b){var c=a;return f(b,function(a,e){return 0>--c||b(a,e)||!c})}},takeWhile:function(a){return function(b){return f(b,function(c,d){return!a(c)||b(c,d)})}},drop:function(a){return function(b){var c=a;return f(b,function(a,e){return 0>--c&&b(a,e)})}},dropWhile:function(a){return function(b){var c=a;return f(b,function(a,e){return!c||!c(a)&&(c=0,b(a,e))})}},cat:n,mapcat:function(a){return g(m(a),n)},reducep:function(a,b){var c=b||a.a&&a.a();
return function(b){return f(b,function(e,f){a(e,c);return b(c,f)})}},reduce:k,bufferAll:function(a){var b=[],c=function(a,c){b.push(a);console.log("Pushing",a)};c.a=a.a;c.b=function(c){console.log("Passing",b);a(b,c)};return c},process:function(a,b){var c=!1;return function(d){return c||(c=a(d,b))}},after:function(a,b){var c=q();setTimeout(function(){c(b)},a);return c}}});
