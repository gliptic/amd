define(function(){function h(a){return a}function k(){var a=arguments;return function(c){for(var b=a.length-1;0<=b;b--)c=a[b](c);return c}}function l(a,c,b,d){return m(a,c(b),d)}function f(a){return{__:f,v:a}}function m(a,c,b){void 0===b&&c.a&&(b=c.a());if(Array.isArray(a))for(var d=0;(!b||b.__!=f)&&d<a.length;++d)b=c(a[d],b);else if(a.then)b=a.then(c,b);else{var e=a[t];a=e?e.call(a):a.next?a:void 0;for(;d=a.next(),!(b&&b.__==f||d.done);)b=c(d.value,b)}return(c.b||h)(b&&b.__==f?b.v:b)}function n(a,
c,b){return l(c,b,u,a)}function g(a,c){c.a=a.a;c.b=a.b;return c}function p(a){return function(c){return g(c,function(b,d){return c(a(b),d)})}}function q(a){return function(c){return g(c,function(b,d){return a(b)?c(b,d):d})}}function r(a){return g(a,function(c,b){var d=g(a,function(b,c){var d=a(b,c);return d&&d.__==f?f(d):d});return m(c,d,b)})}function v(a,c){var b=c;return function(c){b=a(c,b);return!(b&&b.__==f)}}function w(){var a=[],c=function(b){a=n([],a,q(function(a){return a(b)}));return!(!a.length&&
!c.then)};c.then=function(b,c){a.push(v(b,c))};return c}var u=g({a:function(){return[]},b:h},function(a,c){c.push(a);return c}),t=Symbol?Symbol.iterator:"@@iterator";return{compose:k,transduce:l,into:n,map:p,filter:q,take:function(a){return function(c){var b=a;return g(c,function(a,e){return 0<b--?c(a,e):f(e)})}},takeWhile:function(a){return function(c){return g(c,function(b,d){return a(b)?c(b,d):f(d)})}},drop:function(a){return function(c){var b=a;return g(c,function(a,e){return 0<b--?e:c(a,e)})}},
dropWhile:function(a){return function(c){var b=a;return g(c,function(a,e){return b&&b(a)?e:(b=0,c(a,e))})}},cat:r,mapcat:function(a){return k(p(a),r)},after:function(a,c){var b=w();setTimeout(function(){b(c)},a);return b}}});
