define(function(){function g(){var a=arguments;return function(b){for(var c=a.length-1;0<=c;c--)b=a[c](b);return b}}function h(a,b,c,d){b=b(c);var e={v:void 0===e?b.a&&b.a():e};k(a,b,e);return e.v}function k(a,b,c){var d=0;if(Array.isArray(a))for(var e=d=0;!d&&e<a.length;++e)d=b(a[e],c);else if(a.then)d=a.then(b,c);else{var f=a[q];a=f?f.call(a):a.next?a:void 0;for(;e=a.next(),!d&&!e.done;)d=b(e.value,c)}b.b&&b.b(c);return d&&d-1}function l(a,b,c){return h(b,c,r,a)}function f(a,b){a.a&&(b.a=a.a);a.b&&
(b.b=a.b);return b}function m(a){return function(b){return f(b,function(c,d){return b(a(c),d)})}}function n(a){return function(b){return f(b,function(c,d){return a(c)?b(c,d):0})}}function p(a){return f(a,function(b,c){var d=f(a,function(b,c){var d=a(b,c);return d&&d+1});return k(b,d,c)})}function t(a,b){var c={v:b.v};return function(b){return a(b,c)}}function u(){var a=[],b=function(c){a=l([],a,n(function(b){return b(c)}));return!(!a.length&&!b.then)};b.then=function(b,d){a.push(t(b,d))};return b}
var r=f({a:function(){return[]},b:function(){}},function(a,b){b.v.push(a)}),q=Symbol?Symbol.iterator:"@@iterator";return{compose:g,transduce:h,into:l,map:m,filter:n,take:function(a){return function(b){var c=a;return f(b,function(a,e){return 0>--c?1:b(a,e)})}},takeWhile:function(a){return function(b){return f(b,function(c,d){return a(c)?b(c,d):1})}},drop:function(a){return function(b){var c=a;return f(b,function(a,e){return 0>--c?b(a,e):1})}},dropWhile:function(a){return function(b){var c=a;return f(b,
function(a,e){var f=0;c&&c(a)||(c=0,f=b(a,e));return f})}},cat:p,mapcat:function(a){return g(m(a),p)},after:function(a,b){var c=u();setTimeout(function(){c(b)},a);return c}}});
