define(function(){function k(){var a=arguments;return function(b){for(var c=a.length-1;0<=c;c--)b=a[c](b);return b}}function l(a,b,c){return p(a,b(c))}function v(a,b){return a.some(function(a){return b(a)})}function h(a,b){return Object.keys(a).some(function(c){return b([c,a[c]])})}function m(a,b){Array.isArray(a)?b[a[0]]=a[1]:h(a,function(a){return m(a,b)})}function p(a,b){q(a,b);return b.b&&b.b()}function q(a,b){var c=!1;if(Array.isArray(a))c=v(a,b);else if(a.then)c=a.then(b);else{var d;d=(d=a[w])?
d.call(a):void 0;var f;if(d)for(;f=d.next(),!c&&!f.done;)c=b(f.value);else c=h(a,b)}return c}function e(a,b){a.b&&(b.b=a.b);return b}function r(a){return function(b){return e(b,function(c){return b(a(c))})}}function t(){return function(a){return e(a,function(b){return q(b,a)})}}function x(a){var b=[],c=[],d=function(f){a&&c.push(f);b=b.filter(function(a){return!a(f)||!a.b()});return!!b.length||!!d.then};d.then=function(a){a.d&&a.d(1);var c=function(b){return a(b)};c.b=function(){a.d&&a.d(-1)};b.push(c)};
d.done=function(){b=b.filter(function(a){return a.b()})};return d}var n=function(a){a=a||[];return e({b:function(){return a}},function(b){a.push(b)})},y=function(a){a=a||{};return e({b:function(){return a}},function(b){return m(b,a)})},w=Symbol?Symbol.iterator:"@@iterator",u={map:r,filter:function(a){return function(b){return e(b,function(c){return a(c)&&b(c)})}},take:function(a){return function(b){var c=a;return e(b,function(a){return 0>--c||b(a)||!c})}},takeWhile:function(a){return function(b){return e(b,
function(c){return!a(c)||b(c)})}},drop:function(a){return function(b){var c=a;return e(b,function(a){return 0>--c&&b(a)})}},dropWhile:function(a){return function(b){var c=a;return e(b,function(a){return!c||!c(a)&&(c=0,b(a))})}},mapcat:function(a){return k(r(a),t())},cat:t,join:function(){return function(a){var b=1,c={},d=function(b){return a(b)};d.b=function(){d.d(-1);return c};d.d=function(c){(b+=c)||console.log(a.b())};return d}},toArray:function(){return n}},g;g=function(a){return a};h(u,function(a){var b=
a[1];g[a[0]]=function(){var a=b.apply(null,arguments),d=this,e=function(b){return d(a(b))};h(u,function(a){e[a[0]]=g[a[0]]});e.apply=function(a){return l(a,this)};return e}});m({transduce:l,into:function(a,b,c){var d;d=Array.isArray(a)?n:"object"==typeof a?y:n;return l(b,k(c,d),a)},compose:k,reducep:function(a){return function(b){return e(b,function(c){a(c);return b(a.b())})}},reduce:p,process:function(a){var b=!1;return function(c){return b||(b=a(c))}},delay:function(a,b){var c=x();setTimeout(function(){c(b);
c.done()},a);return c}},g);return g});
