define(function(){function h(){var b=arguments;return function(c){for(var a=b.length-1;0<=a;a--)c=b[a](c);return c}}function k(b,c,a,d){return l(b,c(a),d)}function g(b){return{__:g,v:b}}function l(b,c,a){void 0===a&&(a=c.a&&c.a());if(b instanceof Array)a:{var d=a;for(a=0;a<b.length;++a)if((d=c(b[a],d))&&d.__==g){a=d;break a}a=d}else if(b.then)a=b.then(c,a);else{var e=b[r];b=e?e.call(b):b.next?b:void 0;for(;d=b.next(),!d.done;)if((a=c(d.value,a))&&a.__==g)return a}a=a&&a.__==g?a.v:a;c.b&&(a=c.b(a));
return a}function m(b,c,a){return k(c,a,t,b)}function f(b,c){c.a=b.a;c.b=b.b;return c}function n(b){return function(c){return f(c,function(a,d){return c(b(a),d)})}}function p(b){return function(c){return f(c,function(a,d){return b(a)?c(a,d):d})}}function q(b){return f(b,function(c,a){var d=f(b,function(a,c){var d=b(a,c);return d&&d.__==g?d.v:d});return l(c,d,a)})}function u(b,c){var a=c;return function(c){a=b(c,a);return!(a&&a.__==g)}}function v(){var b=[],c={then:function(a,c){b.push(u(a,c))},send:function(a){b=
m([],b,p(function(c){return c(a)}));return!(!b.length&&!c.then)}};return c}var t=f({a:function(){return[]},b:function(b){return b}},function(b,c){c.push(b);return c}),r=Symbol?Symbol.iterator:"@@iterator";return{compose:h,transduce:k,into:m,map:n,filter:p,take:function(b){return function(c){var a=b;return f(c,function(b,e){return 0<a--?c(b,e):g(e)})}},takeWhile:function(b){return function(c){return f(c,function(a,d){return b(a)?c(a,d):g(d)})}},drop:function(b){return function(c){var a=b;return f(c,
function(b,e){return 0<a--?e:c(b,e)})}},dropWhile:function(b){return function(c){var a=b;return f(c,function(b,e){return a&&a(b)?e:(a=0,c(b,e))})}},cat:q,mapcat:function(b){return h(n(b),q)},after:function(b,c){var a=v();setTimeout(function(){a.send(c)},b);return a}}});
