define(function(){function h(){var b=arguments;return function(c){for(var a=b.length-1;0<=a;a--)c=b[a](c);return c}}function k(b,c,a,d){return l(b,c(a),d)}function f(b){return{__:f,v:b}}function l(b,c,a){void 0===a&&(a=c.a&&c.a());if(b instanceof Array){var d=a;for(a=0;(!d||d.__!=f)&&a<b.length;++a)d=c(b[a],d);a=d}else if(b.then)a=b.then(c,a);else{var e=b[r];b=e?e.call(b):b.next?b:void 0;for(;d=b.next(),!(a&&a.__==f||d.done);)a=c(d.value,a)}a=a&&a.__==f?a.v:a;c.b&&(a=c.b(a));return a}function m(b,
c,a){return k(c,a,t,b)}function g(b,c){c.a=b.a;c.b=b.b;return c}function n(b){return function(c){return g(c,function(a,d){return c(b(a),d)})}}function p(b){return function(c){return g(c,function(a,d){return b(a)?c(a,d):d})}}function q(b){return g(b,function(c,a){var d=g(b,function(a,c){var d=b(a,c);return d&&d.__==f?f(d):d});return l(c,d,a)})}function u(b,c){var a=c;return function(c){a=b(c,a);return!(a&&a.__==f)}}function v(){var b=[],c={then:function(a,c){b.push(u(a,c))},send:function(a){b=m([],
b,p(function(c){return c(a)}));return!(!b.length&&!c.then)}};return c}var t=g({a:function(){return[]},b:function(b){return b}},function(b,c){c.push(b);return c}),r=Symbol?Symbol.iterator:"@@iterator";return{compose:h,transduce:k,into:m,map:n,filter:p,take:function(b){return function(c){var a=b;return g(c,function(b,e){return 0<a--?c(b,e):f(e)})}},takeWhile:function(b){return function(c){return g(c,function(a,d){return b(a)?c(a,d):f(d)})}},drop:function(b){return function(c){var a=b;return g(c,function(b,
e){return 0<a--?e:c(b,e)})}},dropWhile:function(b){return function(c){var a=b;return g(c,function(b,e){return a&&a(b)?e:(a=0,c(b,e))})}},cat:q,mapcat:function(b){return h(n(b),q)},after:function(b,c){var a=v();setTimeout(function(){a.send(c)},b);return a}}});
