define(function(){function n(){}function p(){var a=arguments;return function(b){for(var c=a.length-1;0<=c;c--)b=a[c](b);return b}}function q(a,b,c,d){return r(a,b(c),d)}function y(a,b,c){return a.some(function(a){return b(a,c)})}function k(a,b,c){return Object.keys(a).some(function(d){return b([d,a[d]],c)})}function l(a,b){Array.isArray(a)?b[a[0]]=a[1]:k(a,function(a){return l(a,b)})}function r(a,b,c){c=c||b.a&&b.a();t(a,b,c);return c}function t(a,b,c,d){var e=!1;if(Array.isArray(a))e=y(a,b,c);else if(a.then)e=
a.then(b,c);else{var g;g=(g=a[z])?g.call(a):void 0;var f;if(g)for(;f=g.next(),!e&&!f.done;)e=b(f.value,c);else e=k(a,b,c)}!d&&b.b&&b.b(c);return e}function u(a,b,c){var d;d=Array.isArray(a)?m:"object"==typeof a?A:m;return q(b,c,d,a)}function f(a,b){a.a&&(b.a=a.a);a.b&&(b.b=a.b);return b}function v(a){return function(b){return f(b,function(c,d){return b(a(c),d)})}}function w(){return function(a){return f(a,function(b,c){return t(b,a,c,!0)})}}function B(a){var b=[],c=[],d=function(e){a&&c.push(e);b=
b.filter(function(a){return!a(e)||!a.b()});return!!b.length||!!d.then};d.then=function(a,c){a.d&&a.d(c,1);var d=function(b){return a(b,c)};d.b=function(){a.d&&a.d(c,-1)};b.push(d)};d.done=function(){b=b.filter(function(a){return a.b()})};return d}var m=f({a:function(){return[]},b:n},function(a,b){b.push(a)}),A=f({a:function(){},b:n},l),z=Symbol?Symbol.iterator:"@@iterator",x={map:v,filter:function(a){return function(b){return f(b,function(c,d){return a(c)&&b(c,d)})}},take:function(a){return function(b){var c=
a;return f(b,function(a,e){return 0>--c||b(a,e)||!c})}},takeWhile:function(a){return function(b){return f(b,function(c,d){return!a(c)||b(c,d)})}},drop:function(a){return function(b){var c=a;return f(b,function(a,e){return 0>--c&&b(a,e)})}},dropWhile:function(a){return function(b){var c=a;return f(b,function(a,e){return!c||!c(a)&&(c=0,b(a,e))})}},mapcat:function(a){return p(v(a),w())},cat:w,join:function(){return function(a){var b=function(b,d){return a(b,d.s)};b.a=function(){return{s:a.a&&a.a(),o:1}};
b.b=function(a){b.d(a,-1)};b.d=function(a,b){(a.o+=b)||a(a.s)};return b}}},h;h=function(a){return a};k(x,function(a){var b=a[1];h[a[0]]=function(){var a=b.apply(null,arguments),d=this,e=function(b){return d(a(b))};k(x,function(a){e[a[0]]=h[a[0]]});e.apply=function(a,b){return u(b,a,this)};return e}});l({transduce:q,into:u,compose:p,arrayReducer:m,reducep:function(a,b){var c=b||a.a&&a.a();return function(b){return f(b,function(e,f){a(e,c);return b(c,f)})}},reduce:r,process:function(a,b){var c=!1;return function(d){return c||
(c=a(d,b))}},after:function(a,b){var c=B();setTimeout(function(){c(b);c.done()},a);return c}},h);return h});
