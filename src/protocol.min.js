define(["transducers"],function(p){function d(){}var g=[],h=[];d.call=function(a,d){function f(){c.i=g.length;g.push(e);h.push(c)}function k(a,c){var b=a[c];l.push(c);"object"==typeof b?Object.keys(b).some(function(a,c){k(b,a)}):Array.isArray(b)?b.some(function(a,c){k(b,c)}):b.t===p.sig&&(++m,b.some(function(b){a[c]=b;--m||f()}),void 0!==b.cur()&&(n=n||void 0==b.i,(e.d=e.d||{}).push([l.slice(1),b.i]),a[c]=void 0));l.pop()}var c=p.sig(!0),e={b:d},l=[],m=1,n;k(e,0);n?(e.d=void 0,--m||f()):f();return c};
d.flush=function(){if(g.length){var a=new XMLHttpRequest,d=g,f=h;g=[];h=[];a.onreadystatechange=function(){if(3<a.readyState)if(a.getAllResponseHeaders(),2==(""+a.status)[0]){var d=JSON.stringify(a.responseText);f.some(function(a,e){return a(d[e],!0)})}else f.some(function(a){return a(void 0,!0)});else 1<a.readyState&&a.getAllResponseHeaders()};a.open("GET",void 0,!0);a.send(JSON.stringify(d))}};return d});
