define(["transducers"],function(n){function b(){}var f=[],p=[];b.call=function(a,b){function g(){var a=f.length;h.i=a;f.push(d);p.push(function(d){h(d[a])})}function k(a,b){var c=a[b];"object"==typeof c?Object.keys(c).some(function(a,b){e.push(a);k(c,a);e.pop()}):Array.isArray(c)?c.some(function(a,b){e.push(a);k(c,b);e.pop()}):c.t===n.sig&&(++l,c.then(function(c){a[b]=c;!--l||g()})||(m=m||void 0==c.i,d.d=d.d||{},d.d.push([e.join("."),c.i]),a[b]=void 0))}var h=n.sig(!0),d={b:b},e=[],l=1,m;k(d,0);m?
(d.d=void 0,!--l||g()):g();return h};b.flush=function(){var a=new XMLHttpRequest,b=f;f=[];p=[];a.onreadystatechange=function(){3<a.readyState?a.getAllResponseHeaders():1<a.readyState&&a.getAllResponseHeaders()};a.open(["GET"][void 0],void 0,!0);a.send(JSON.stringify(b))};return b});
